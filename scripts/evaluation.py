from pathlib import Path

import h5py

from resnet.eval_utils.plot_utils import plot_top1
from resnet.eval_utils.eval_utils import eval_scaling
from resnet.eval_utils.read_utils import print_attrs

# result_path = Path("/home/scc/xy6660/ResNet/ResNet/experiments/")
result_path = Path("/Users/philipphuber/Documents/Projects/ResNet/experiments/")

large_ss_const_gbs_list = {"32g256b4w100e": ["3172377", "3172802", "3173813", "3175067", "3179925"],
                     "64g128b4w100e": ["3172777", "3172801", "3173812", "3175066", "3179924"],
                     "128g64b4w100e": ["3172774", "3172799", "3173810", "3175064", "3179922"],
                     "256g32b4w100e": ["3172773", "3172797", "3173808", "3175062", "3179920"]}

small_ss_const_gbs_list = {"1g256b4w100e": ["3226704", "3226705", "3226706", "3226707", "3226708"],
                           "2g128b4w100e": ["3211174", "3215288", "3216341", "3217900", "3239757"],
                           "4g64b4w100e": ["3211175", "3215289", "3216342", "3217901", "3219598"],
                           "8g32b4w100e": ["3211176", "3215290", "3216343", "3217902", "3219599"],
                           "16g16b4w100e": ["3211177", "3215291", "3216344", "3217903", "3219600"]}

ss_const_lbs_list = {"1g256b4w100e": ["3226704", "3226705", "3226706", "3226707", "3226708"],
                     "2g256b4w100e": ["3211178", "3215283", "3216346", "3217896", "3219605"],
                     "4g256b4w100e": ["3211179", "3211179", "3216347", "3217897", "3219606"],
                     "8g256b4w100e": ["3211180", "3215285", "3216348", "3217898", "3219607"],
                     "16g256b4w100e": ["3172378", "3172803", "3173814", "3175068", "3179926"],
                     "32g256b4w100e": ["3172377", "3172802", "3173813", "3175067", "3179925"],
                     "64g256b4w100e": ["3170541", "3172800", "3173811", "3175065", "3179923"],
                     "128g256b4w100e": ["3171624", "3173809", "3175063", "3179921", "3239758"],
                     "256g256b4w100e": ["3167090", "3172796", "3173807", "3175061", "3179919"]}

large_ws_const_lbs_list_wrong = {"1g256b4w100e2560s": ["3222366", "3223455", "3224038", "3224047", "3224056"],  #"3224104"],
                     "2g256b4w100e5120s": ["3222365", "3223454", "3224037", "3224046", "3224055"],  #"3224103"],
                     "4g256b4w100e10240s": ["3222364", "3223453", "3224036", "3224054", "3224102"],
                     "8g256b4w100e20480s": ["3223446", "3223452", "3224044", "3224053", "3224101"],
                     "16g256b4w100e40960s": ["3222362", "3223451", "3224034", "3224043", "3224052"],  #"3224100"],
                     "32g256b4w100e81920s": ["3223445", "3223450", "3224033", "3224042", "3224051"],  #"3224099", "3224922"],
                     "64g256b4w100e163840s": ["3222360", "3223449", "3224041", "3224050", "3224098"],
                     "128g256b4w100e327680s": ["3222359", "3223448", "3224031", "3224040", "3224049"],  #"3224097"],
                     "256g256b4w100e655360s": ["3222358", "3223447", "3224030", "3224039", "3224048"]}  #"3224096"]}

small_ws_const_gbs_list_wrong = {"1g256b4w100e40960s": ["3224899", "3231022", "3231329", "3231334", "3231339"],
                           "2g128b4w100e81920s": ["3224898", "3231021", "3231328", "3231333", "3231338"],
                           "4g64b4w100e163840s": ["3224897", "3231020", "3231327", "3231332", "3231332"],
                           "8g32b4w100e327680s": ["3224896", "3231019", "3231326", "3231331", "3231336"],
                           "16g16b4w100e655360s": ["3231018", "3231325", "3231335", "3232963", "3232964"]}

large_ws_const_gbs_list_wrong = {"32g256b4w100e81920s": ["3223445", "3223450", "3224033", "3224042", "3224051"],  #"3224099", "3224922"],
                           "64g128b4w100e163840s": ["3224921", "3231343", "3231346", "3231349", "3231352"],
                           "128g64b4w100e327680s": ["3224920", "3231342", "3231348", "3231351", "3239740"],
                           "256g32b4w100e655360s": ["3224919", "3234209", "3234210", "3234211", "3234212"]}

large_ws_const_lbs_list = {"1g256b4w100e256sf": ["3290601", "3290991", "3292881", "3292892", "3294277"],
                           "2g256b4w100e128sf": ["3290992", "3292882", "3292893", "3294278", "3294288"],
                           "4g256b4w100e64sf": ["3290603", "3290993", "3292883", "3292894", "3294279"],
                           "8g256b4w100e32sf": ["3290994", "3292884", "3292895", "3294280", "3294289"],
                           "16g256b4w100e16sf": ["3290995", "3292885", "3292896", "3294290"],
                           "32g256b4w100e8sf": ["3290996", "3290999", "3292878", "3292886", "3292897", "3292900"],
                           "64g256b4w100e4sf": ["3292887", "3292898"],
                           "128g256b4w100e2sf": ["3292888", "3292899", "3294302"],
                           "256g256b4w100e": ["3167090", "3172796", "3173807", "3175061", "3179919"]}

small_ws_const_gbs_list = {"1g256b4w100e16sf": ["3290594", "3291002", "3292874", "3292903", "3294271"],
                           "2g128b4w100e8sf": ["3291003", "3292875", "3292904", "3294272", "3294295"],
                           "4g64b4w100e4sf": ["3290596", "3291004", "3292876", "3292905", "3294273"],
                           "8g32b4w100e2sf": ["3290597", "3291005", "3292877", "3292906", "3294274"],
                           "16g16b4w100e": ["3211177", "3215291", "3216344", "3217903", "3219600"]}

large_ws_const_gbs_list = {"32g256b4w100e8sf": ["3290996", "3290999", "3292878", "3292886", "3292897", "3292900"],
                           "64g128b4w100e4sf": ["3291000", "3292879", "3292901"],
                           "128g64b4w100e2sf": ["3292880", "3294300"],
                           "256g32b4w100e": ["3172773", "3172797", "3173808", "3175062", "3179920"]}


eval_scaling(result_path=result_path, scaling_list=large_ss_const_gbs_list, name="resnet_large_ss_const_gbs")
eval_scaling(result_path=result_path, scaling_list=small_ss_const_gbs_list, name="resnet_small_ss_const_gbs")
eval_scaling(result_path=result_path, scaling_list=ss_const_lbs_list, name="resnet_ss_const_lbs")
eval_scaling(result_path=result_path, scaling_list=large_ws_const_lbs_list, name="resnet_large_ws_const_lbs")
eval_scaling(result_path=result_path, scaling_list=large_ws_const_gbs_list, name="resnet_large_ws_const_gbs")
eval_scaling(result_path=result_path, scaling_list=small_ws_const_gbs_list, name="resnet_small_ws_const_gbs")

#plot_top1(result_path, constant_gbs_list, name="resnet_constant_gbs", key="constant_gbs")
#plot_top1(result_path, constant_lbs_list, name="resnet_constant_lbs", key="constant_lbs")

#perun_h5_file = Path("/Users/philipphuber/Documents/Projects/ResNet/experiments/128g256b4w100e/3171624/perun/perun.hdf5")
#h5val = h5py.File(perun_h5_file, 'r')
#h5val.visititems(print_attrs)
